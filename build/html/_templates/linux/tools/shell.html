

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Shell &mdash; cloudlight 1.0.1 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="cloudlight 1.0.1 documentation" href="../../../index.html" />
    <link rel="next" title="自动化安装操作系统" href="../../automation/cobbler.html" />
    <link rel="prev" title="Linux Network Tool" href="networktool.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../automation/cobbler.html" title="自动化安装操作系统"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="networktool.html" title="Linux Network Tool"
             accesskey="P">previous</a> |</li>
        <li><a href="../../../index.html">cloudlight 1.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Shell</a><ul>
<li><a class="reference internal" href="#awk">Awk</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="networktool.html"
                        title="previous chapter">Linux Network Tool</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../../automation/cobbler.html"
                        title="next chapter">自动化安装操作系统</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../_sources/_templates/linux/tools/shell.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="shell">
<h1>Shell<a class="headerlink" href="#shell" title="Permalink to this headline">¶</a></h1>
<p>Shell is the most powerfull tool in linux, no one of them.(最强工具，没有之一^-^)</p>
<div class="section" id="awk">
<h2>Awk<a class="headerlink" href="#awk" title="Permalink to this headline">¶</a></h2>
<p>Awk is very popular in linux operation. Awk process with text in architecutre.
It defines every line one record, and defines every string one field, which is devided by something with others.</p>
<p>Some examples:</p>
<p>打印第一行：    awk ‘NR==1{print $0}&#8217;</p>
<p>打印第一行最后一个字段：    awk -F: &#8216;NR==1{print $NF}&#8217;</p>
<p>This is a shell use awk to start all the docker container when the power is on. I put this shell to excute in /etc/rc.local.</p>
<div class="highlight-python"><pre>#!/bin/bash

list=`docker ps -a | awk 'NR!=1{print $1}'`
echo ${list}

for container in $list
    do
    docker start $container
    done</pre>
</div>
<p>This is a shell check gmail.</p>
<div class="highlight-python"><pre>#!/bin/bash

curl -u yangwenjian99@gmail.com --silent "https://mail.google.com/mail/feed/atom" | perl -ne \
    '
print "Subject: $1 " if /&lt;title&gt;(.+?)&lt;\/title&gt;/ &amp;&amp; $title++;
print "(from $1)\n" if /&lt;email&gt;(.+?)&lt;\/email&gt;/
    '</pre>
</div>
<p>This is an example to check network.</p>
<div class="highlight-python"><pre>#!/bin/bash

for((i=1;i&lt;=255;i++));do
    ping -c 5 192.168.1.$i
    done</pre>
</div>
<p>Here is a pit in my work. I want to count the first line of one file, but it doesn&#8217;t work.</p>
<div class="highlight-python"><pre>count=0
sum=0
awk '{print $1}' public/shell/testfile | while read onehelloline
do
    echo $onehelloline
    ((count= count+1))
    echo $count
    ((sum= sum+onehelloline))
    echo $sum
done
echo $count
echo $sum
averagetime=`expr $(($sum/$count))`
echo $averagetime</pre>
</div>
<p>最后发现count和sum都是0,原因是那块循环中并没有影响到全局变量。修改循环变量如下：</p>
<div class="highlight-python"><pre>data1=`awk '{print $1}' public/shell/testfile`
for data in $data1;do
    ((count= count+1))
    ((sum= sum+data))
done</pre>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../automation/cobbler.html" title="自动化安装操作系统"
             >next</a> |</li>
        <li class="right" >
          <a href="networktool.html" title="Linux Network Tool"
             >previous</a> |</li>
        <li><a href="../../../index.html">cloudlight 1.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, knight.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>